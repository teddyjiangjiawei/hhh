| ID             | 1                                                            |
| -------------- | ------------------------------------------------------------ |
| 名称           | 预订酒店                                                     |
| 创建者         | 姜佳玮                                                       |
| 创建日期       | 2020/3/8                                                     |
| 最后一次更新者 |                                                              |
| 最后更新日期   |                                                              |
| 参与者         | 顾客，目标是能成功预定到心仪的酒店                           |
| 触发条件       | 顾客需要预订酒店                                             |
| 前置条件       | 顾客已经登陆进入系统，并且所订酒店还有余房                   |
| 后置条件       | 系统更新顾客的订单信息，该酒店的客房剩余数量                 |
| 优先级         | 高                                                           |
| 正常流程       | 1.顾客选择预定的酒店和房型<br/>2.顾客填写预订单，设置入住时间、退房时间、房间数量、预计入住天数及有无儿童<br/>3.系统将该酒店的该客房为该客户锁定，计算金额，生成一个订单并显示该订单<br/>4.顾客选择支付方式，确认支付订单<br/>5.系统确认支付结果，展示给顾客，并且更新顾客的订单信息，该酒店的客房剩余数量，完成此订单 |
| 扩展流程       | 1a.顾客有同一酒店未支付订单<br/>     1.系统提示顾客有同一酒店未支付订单，询问其是否继续支付另一订单<br/>         1a.用户继续支付另一订单，返回正常流程第4步<br/>         1b.用户放弃支付另一订单，系统删除另一订单，返回正常流程第3步<br/>2a.在顾客发起查询到请求锁定的时间内，该类型客房已经被其他用户锁定，没有剩余房间<br/>     1.系统提示顾客没有多余房间，返回正常流程第2步<br/>4a.顾客取消订单支付<br/>     1.系统为该顾客保留订单15分钟，等待顾客返回支付<br/>         1a.15分钟后该顾客仍未支付该订单<br/>              1.系统删除该订单，并解除订单所选客房的锁定状态<br/>4b.顾客支付时使用了优惠券<Br/>     1.系统计算并显示使用优惠券后的金额<br/>     2.支付成功后更新顾客的优惠券<br/>5b.顾客选择的支付方式支付失败<br/>     1.系统显示支付失败的原因，并为顾客保留订单15分钟<br/>5b.该笔订单金额达到了某优惠活动的参与金额<br/>     1.系统更新顾客的优惠券，显示用户获得的优惠券 |
| 特殊需求       | 1.顾客单笔订单能预订的房间上限为8间房                        |

